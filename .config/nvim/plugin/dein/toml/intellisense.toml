
[[plugins]]
repo = 'neoclide/coc.nvim'
rev = 'release'
on_event = ['BufRead']
hook_source = '''
" Don't pass messages to |ins-completion-menu|.
set shortmess+=c
" use <tab> for trigger completion and navigate to the next complete item
function! s:check_back_space() abort
    let col = col('.') - 1
    return !col || getline('.')[col - 1] =~ '\s'
endfunction
inoremap <silent><expr> <TAB>
      \ coc#pum#visible() ? coc#pum#next(1):
      \ CheckBackspace() ? "\<Tab>" :
      \ coc#refresh()
imap <expr><S-TAB> coc#pum#visible() ? coc#pum#prev(1) : "\<C-h>"
inoremap <silent><expr> <cr> coc#pum#visible() ? coc#_select_confirm() : "\<C-g>u\<CR>"
nm <silent> <C-l> <Plug>(coc-diagnostic-prev)
nm <silent> <C-k> <Plug>(coc-diagnostic-next)
nm <Leader>rn <Plug>(coc-rename)
" GoTo code navigation.
nmap <silent> gd <Plug>(coc-definition)
nmap <silent> gy <Plug>(coc-type-definition)
nmap <silent> gi <Plug>(coc-implementation)
nmap <silent> gr <Plug>(coc-references)

aug CocCompleteDone
  au!
  au CompleteDone * if pumvisible() == 0 | pclose | endif
aug END
let g:coc_global_extensions = [
    \ 'coc-actions',
    \ 'coc-explorer',
    \ 'coc-git',
    \ 'coc-spell-checker',
    \ 'coc-emoji',
    \ 'coc-markdownlint',
    \ 'coc-json',
    \ 'coc-yaml',
    \ 'coc-diagnostic',
    \ 'coc-sh',
    \ 'coc-vimlsp',
    \ 'coc-rust-analyzer',
    \ 'coc-eslint',
    \ 'coc-tsserver',
    \ 'coc-stylelintplus',
    \ 'coc-vetur',
    \ 'coc-python',
    \ 'coc-css',
    \ 'coc-sql',
    \ 'coc-docker',
    \ 'coc-texlab',
\ ]
" coc-explorer
nm <Leader>e :CocCommand explorer <CR>
aug CocExplorerAutoClose
    au!
    au BufEnter * if (winnr("$") == 1 && &filetype == 'coc-explorer') | q | endif
aug END
'''


